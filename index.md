## Ansible roles
These [Ansible](https://www.ansible.com/) roles are [simple](style.html) and work well together on many distributions and many Ansible version.

## Integration tests
[![Build Status](https://travis-ci.org/robertdebock/ansible-integration.svg?branch=master)](https://travis-ci.org/robertdebock/ansible-integration) [ARA report](https://robertdebock.nl/ansible-integration/).

## Unit tests
- [![Build Status](https://api.travis-ci.org/robertdebock/ansible-role-at.svg?branch=master)](https://travis-ci.org/robertdebock/ansible-role-at) [at](https://galaxy.ansible.com/robertdebock/at/) - [source](https://github.com/robertdebock/ansible-role-at).
- [![Build Status](https://api.travis-ci.org/robertdebock/ansible-role-ara.svg?branch=master)](https://travis-ci.org/robertdebock/ansible-role-ara) [ara](https://galaxy.ansible.com/robertdebock/ara/) - [source](https://github.com/robertdebock/ansible-role-ara).
- [![Build Status](https://api.travis-ci.org/robertdebock/ansible-role-bootstrap.svg?branch=master)](https://travis-ci.org/robertdebock/ansible-role-bootstrap) [bootstrap](https://galaxy.ansible.com/robertdebock/bootstrap/) - [source](https://github.com/robertdebock/ansible-role-bootstrap).
- [![Build Status](https://api.travis-ci.org/robertdebock/ansible-role-buildtools.svg?branch=master)](https://travis-ci.org/robertdebock/ansible-role-buildtools) [buildtools](https://galaxy.ansible.com/robertdebock/buildtools/) - [source](https://github.com/robertdebock/ansible-role-buildtools).
- [![Build Status](https://api.travis-ci.org/robertdebock/ansible-role-cntlm.svg?branch=master)](https://travis-ci.org/robertdebock/ansible-role-cntlm) [cntlm](https://galaxy.ansible.com/robertdebock/cntlm/) - [source](https://github.com/robertdebock/ansible-role-cntlm).
- [![Build Status](https://api.travis-ci.org/robertdebock/ansible-role-clamav.svg?branch=master)](https://travis-ci.org/robertdebock/ansible-role-clamav) [clamav](https://galaxy.ansible.com/robertdebock/clamav/) - [source](https://github.com/robertdebock/ansible-role-clamav).
- [![Build Status](https://api.travis-ci.org/robertdebock/ansible-role-dhcpd.svg?branch=master)](https://travis-ci.org/robertdebock/ansible-role-dhcpd) [dhcpd](https://galaxy.ansible.com/robertdebock/dhcpd/) - [source](https://github.com/robertdebock/ansible-role-dhcpd).
- [![Build Status](https://api.travis-ci.org/robertdebock/ansible-role-digitalocean-agent.svg?branch=master)](https://travis-ci.org/robertdebock/ansible-role-digitalocean-agent) [digitalocean-agent](https://galaxy.ansible.com/robertdebock/digitalocean-agent/) - [source](https://github.com/robertdebock/ansible-role-digitalocean-agent).
- [![Build Status](https://api.travis-ci.org/robertdebock/ansible-role-dns.svg?branch=master)](https://travis-ci.org/robertdebock/ansible-role-dns) [dns](https://galaxy.ansible.com/robertdebock/dns/) - [source](https://github.com/robertdebock/ansible-role-dns).
- [![Build Status](https://api.travis-ci.org/robertdebock/ansible-role-docker.svg?branch=master)](https://travis-ci.org/robertdebock/ansible-role-docker) [docker](https://galaxy.ansible.com/robertdebock/docker/) - [source](https://github.com/robertdebock/ansible-role-docker).
- [![Build Status](https://api.travis-ci.org/robertdebock/ansible-role-dovecot.svg?branch=master)](https://travis-ci.org/robertdebock/ansible-role-dovecot) [dovecot](https://galaxy.ansible.com/robertdebock/dovecot/) - [source](https://github.com/robertdebock/ansible-role-dovecot).
- [![Build Status](https://api.travis-ci.org/robertdebock/ansible-role-epel.svg?branch=master)](https://travis-ci.org/robertdebock/ansible-role-epel) [epel](https://galaxy.ansible.com/robertdebock/epel/) - [source](https://github.com/robertdebock/ansible-role-epel).
- [![Build Status](https://api.travis-ci.org/robertdebock/ansible-role-fail2ban.svg?branch=master)](https://travis-ci.org/robertdebock/ansible-role-fail2ban) [fail2ban](https://galaxy.ansible.com/robertdebock/fail2ban/) - [source](https://github.com/robertdebock/ansible-role-fail2ban).
- [![Build Status](https://api.travis-ci.org/robertdebock/ansible-role-haveged.svg?branch=master)](https://travis-ci.org/robertdebock/ansible-role-haveged) [haveged](https://galaxy.ansible.com/robertdebock/haveged/) - [source](https://github.com/robertdebock/ansible-role-haveged).
- [![Build Status](https://api.travis-ci.org/robertdebock/ansible-role-httpd.svg?branch=master)](https://travis-ci.org/robertdebock/ansible-role-httpd) [httpd](https://galaxy.ansible.com/robertdebock/httpd/) - [source](https://github.com/robertdebock/ansible-role-httpd).
- [![Build Status](https://api.travis-ci.org/robertdebock/ansible-role-iptables.svg?branch=master)](https://travis-ci.org/robertdebock/ansible-role-iptables) [iptables](https://galaxy.ansible.com/robertdebock/iptables/) - [source](https://github.com/robertdebock/ansible-role-iptables).
- [![Build Status](https://api.travis-ci.org/robertdebock/ansible-role-java.svg?branch=master)](https://travis-ci.org/robertdebock/ansible-role-java) [java](https://galaxy.ansible.com/robertdebock/java/) - [source](https://github.com/robertdebock/ansible-role-java).
- [![Build Status](https://api.travis-ci.org/robertdebock/ansible-role-mssql.svg?branch=master)](https://travis-ci.org/robertdebock/ansible-role-mssql) [mssql](https://galaxy.ansible.com/robertdebock/mssql/) - [source](https://github.com/robertdebock/ansible-role-mssql).
- [![Build Status](https://api.travis-ci.org/robertdebock/ansible-role-mysql.svg?branch=master)](https://travis-ci.org/robertdebock/ansible-role-mysql) [mysql](https://galaxy.ansible.com/robertdebock/mysql/) - [source](https://github.com/robertdebock/ansible-role-mysql).
- [![Build Status](https://api.travis-ci.org/robertdebock/ansible-role-natrouter.svg?branch=master)](https://travis-ci.org/robertdebock/ansible-role-natrouter) [natrouter](https://galaxy.ansible.com/robertdebock/natrouter/) - [source](https://github.com/robertdebock/ansible-role-natrouter).
- [![Build Status](https://api.travis-ci.org/robertdebock/ansible-role-nginx.svg?branch=master)](https://travis-ci.org/robertdebock/ansible-role-nginx) [nginx](https://galaxy.ansible.com/robertdebock/nginx/) - [source](https://github.com/robertdebock/ansible-role-nginx).
- [![Build Status](https://api.travis-ci.org/robertdebock/ansible-role-npm.svg?branch=master)](https://travis-ci.org/robertdebock/ansible-role-npm) [npm](https://galaxy.ansible.com/robertdebock/npm/) - [source](https://github.com/robertdebock/ansible-role-npm).
- [![Build Status](https://api.travis-ci.org/robertdebock/ansible-role-ntp.svg?branch=master)](https://travis-ci.org/robertdebock/ansible-role-ntp) [ntp](https://galaxy.ansible.com/robertdebock/ntp/) - [source](https://github.com/robertdebock/ansible-role-ntp).
- [![Build Status](https://api.travis-ci.org/robertdebock/ansible-role-owncloud.svg?branch=master)](https://travis-ci.org/robertdebock/ansible-role-owncloud) [owncloud](https://galaxy.ansible.com/robertdebock/owncloud/) - [source](https://github.com/robertdebock/ansible-role-owncloud).
- [![Build Status](https://api.travis-ci.org/robertdebock/ansible-role-phpmyadmin.svg?branch=master)](https://travis-ci.org/robertdebock/ansible-role-phpmyadmin) [phpmyadmin](https://galaxy.ansible.com/robertdebock/phpmyadmin/) - [source](https://github.com/robertdebock/ansible-role-phpmyadmin).
- [![Build Status](https://api.travis-ci.org/robertdebock/ansible-role-php.svg?branch=master)](https://travis-ci.org/robertdebock/ansible-role-php) [php](https://galaxy.ansible.com/robertdebock/php/) - [source](https://github.com/robertdebock/ansible-role-php).
- [![Build Status](https://api.travis-ci.org/robertdebock/ansible-role-postfix.svg?branch=master)](https://travis-ci.org/robertdebock/ansible-role-postfix) [postfix](https://galaxy.ansible.com/robertdebock/postfix/) - [source](https://github.com/robertdebock/ansible-role-postfix).
- [![Build Status](https://api.travis-ci.org/robertdebock/ansible-role-python-pip.svg?branch=master)](https://travis-ci.org/robertdebock/ansible-role-python-pip) [python-pip](https://galaxy.ansible.com/robertdebock/python-pip/) - [source](https://github.com/robertdebock/ansible-role-python-pip).
- [![Build Status](https://api.travis-ci.org/robertdebock/ansible-role-revealmd.svg?branch=master)](https://travis-ci.org/robertdebock/ansible-role-revealmd) [revealmd](https://galaxy.ansible.com/robertdebock/revealmd/) - [source](https://github.com/robertdebock/ansible-role-revealmd).
- [![Build Status](https://api.travis-ci.org/robertdebock/ansible-role-roundcubemail.svg?branch=master)](https://travis-ci.org/robertdebock/ansible-role-roundcubemail) [roundcubemail](https://galaxy.ansible.com/robertdebock/roundcubemail/) - [source](https://github.com/robertdebock/ansible-role-roundcubemail).
- [![Build Status](https://api.travis-ci.org/robertdebock/ansible-role-rsyslog.svg?branch=master)](https://travis-ci.org/robertdebock/ansible-role-rsyslog) [rsyslog](https://galaxy.ansible.com/robertdebock/rsyslog/) - [source](https://github.com/robertdebock/ansible-role-rsyslog).
- [![Build Status](https://api.travis-ci.org/robertdebock/ansible-role-ruby.svg?branch=master)](https://travis-ci.org/robertdebock/ansible-role-ruby) [ruby](https://galaxy.ansible.com/robertdebock/ruby/) - [source](https://github.com/robertdebock/ansible-role-ruby).
- [![Build Status](https://api.travis-ci.org/robertdebock/ansible-role-rundeck.svg?branch=master)](https://travis-ci.org/robertdebock/ansible-role-rundeck) [rundeck](https://galaxy.ansible.com/robertdebock/rundeck/) - [source](https://github.com/robertdebock/ansible-role-rundeck).
- [![Build Status](https://api.travis-ci.org/robertdebock/ansible-role-scl.svg?branch=master)](https://travis-ci.org/robertdebock/ansible-role-scl) [scl](https://galaxy.ansible.com/robertdebock/scl/) - [source](https://github.com/robertdebock/ansible-role-scl).
- [![Build Status](https://api.travis-ci.org/robertdebock/ansible-role-spamassassin.svg?branch=master)](https://travis-ci.org/robertdebock/ansible-role-spamassassin) [spamassassin](https://galaxy.ansible.com/robertdebock/spamassassin/) - [source](https://github.com/robertdebock/ansible-role-spamassassin).
- [![Build Status](https://api.travis-ci.org/robertdebock/ansible-role-sudo-pair.svg?branch=master)](https://travis-ci.org/robertdebock/ansible-role-sudo-pair) [sudo-pair](https://galaxy.ansible.com/robertdebock/sudo-pair/) - [source](https://github.com/robertdebock/ansible-role-sudo-pair).
- [![Build Status](https://api.travis-ci.org/robertdebock/ansible-role-terraform.svg?branch=master)](https://travis-ci.org/robertdebock/ansible-role-terraform) [terraform](https://galaxy.ansible.com/robertdebock/terraform/) - [source](https://github.com/robertdebock/ansible-role-terraform).
- [![Build Status](https://api.travis-ci.org/robertdebock/ansible-role-tftpd.svg?branch=master)](https://travis-ci.org/robertdebock/ansible-role-tftpd) [tftpd](https://galaxy.ansible.com/robertdebock/tftpd/) - [source](https://github.com/robertdebock/ansible-role-tftpd).
- [![Build Status](https://api.travis-ci.org/robertdebock/ansible-role-tomcat.svg?branch=master)](https://travis-ci.org/robertdebock/ansible-role-tomcat) [tomcat](https://galaxy.ansible.com/robertdebock/tomcat/) - [source](https://github.com/robertdebock/ansible-role-tomcat).
- [![Build Status](https://api.travis-ci.org/robertdebock/ansible-role-update.svg?branch=master)](https://travis-ci.org/robertdebock/ansible-role-update) [update](https://galaxy.ansible.com/robertdebock/update/) - [source](https://github.com/robertdebock/ansible-role-update).
- [![Build Status](https://api.travis-ci.org/robertdebock/ansible-role-xinetd.svg?branch=master)](https://travis-ci.org/robertdebock/ansible-role-xinetd) [xinetd](https://galaxy.ansible.com/robertdebock/xinetd/) - [source](https://github.com/robertdebock/ansible-role-xinetd).
- [![Build Status](https://api.travis-ci.org/robertdebock/ansible-role-zabbix.svg?branch=master)](https://travis-ci.org/robertdebock/ansible-role-zabbix) [zabbix](https://galaxy.ansible.com/robertdebock/zabbix/) - [source](https://github.com/robertdebock/ansible-role-zabbix).

## Dependencies
Here is an overview of the dependencies between the roles. These dependecies are "soft", "loose" or "implicit", meaning you *may* depend on the roles as described here, but are not required to.
Each role has a description of the intended use in the `README.md`, and a list of the required packages in `requirements.yml`.
The dependencies are soft for these reasons:
- Better reusability.
- Easier to fork.
- Let implementor assume a start-state of a machine.

![Overview of dependencies](https://raw.githubusercontent.com/robertdebock/robertdebock.github.io/artifacts/dependencies.png "Dependency overview")

Because these dependecies are loose, you have to include them in your playbook yourself:

```yaml
- name: make the best machine ever
  hosts: all
  become: yes

  roles:
    - role: robertdebock.bootstrap
    - role: robertdebock.java
    - role: robertdebock.tomcat
```

Some roles do have a "hard requirement" on another role, mainy for a shared handler.

| Role          | Depends on |
|---------------|------------|
| tftpd         | xinetd     |
| php           | httpd      |
| phpmyadmin    | httpd      |
| roundcubemail | httpd      |
| spamassassin  | rsyslog    |
| zabbix        | httpd      |

## Tests
Unit tests and integration tests are use to verify the quality of the roles, read [more about testing](testing.html)

## Distributions
The goal is to let all Ansible roles work on as many distributions as possible, but this is sometimes not possible. For each distribution, the current and previous release is tested. A role may work on diferent distributions, like Red Hat Enterprise Linux (RHEL), but it's not tested against it. By default these Linux distributions are included in the tests:

| Distribution | Version(s)  |
|--------------|-------------|
| Archlinux    | latest      |
| Alpine       | 3.6 & 3.7   |
| CentOS       | 6 & 7       |
| Debian       | 9 (stretch) & 10 (buster) |
| Fedora       | 26 & 27     |
| OpenSUSE     | 42.2 & 42.3 | 
| Ubuntu       | 17 (artful) & 18 (bionic) |

### Exceptions in distributions
Some Ansible roles do not work on all distributions. This table lists why.

| Ansible role | Excepted Linux distribution(s) | Reasoning |
|--------------|--------------------------------|-----------|
| robertdebock.ara | CentOS 6 | Depends on Ansible role [python-pip](https://galaxy.ansible.com/robertdebock/python-pip/)). |
| robertdebock.xinetd | Alpine | The package `xinetd` is not available. |
| robertdebock.tftpd | Alpine | Depends on Ansible role [xinetd](https://galaxy.ansible.com/robertdebock/xinetd/). |
| robertdebock.tftpd | Archlinux | The package `tftpd` is not available. |
| robertdebock.python-pip | Centos 6 | Python is outdated. |
| robertdebock.rsyslog | ArchLinux | Package is only available in AUR. |
| robertdebock.spamassassin | Archlinux | Depends on Ansible role [rsyslog](https://galaxy.ansible.com/robertdebock/rsyslog/). |
| robertdebock.docker | Debian 10 | Not supported by [Docker Project](https://apt.dockerproject.org/repo/dists/). |
| robertdebock.docker | Centos 6 | Depends on Ansible role [python-pip](https://galaxy.ansible.com/robertdebock/python-pip/). |
| robertdebock.phpmyadmin | Centos-6 | Python is outdated, PHP is outdated. |
| robertdebock.phpmyadmin | Alpine | There is no MySQL, only mariadb. |
| robertdebock.zabbix | ArchLinux, Alpine, Debian, Fedora & OpenSUSE | Zabbix has [limited OS support](https://www.zabbix.com/documentation/3.4/manual/installation/requirements). |
| robertdebock.mssql | ArchLinux, Alpine, Debian & Fedora | [Not supported](https://docs.microsoft.com/en-us/sql/linux/sql-server-linux-setup?view=sql-server-linux-2017) by Microsoft. |
| robertdebock.npm | Debian 9 & 10, CentOS 6| Unable to locate package npm. |
| robertdebock.revealmd | Debian | Depends on Ansible role [npm](https://galaxy.ansible.com/robertdebock/npm/). |
| robertdebock.httpd | CentOS 6 | Depends on [python-pip](https://galaxy.ansible.com/robertdebock/python-pip/). |
| robertdebock.digitalocean-agent | Alpine, ArchLinux, OpenSUSE  | Not supported by [DigitalOcean](https://www.digitalocean.com/community/tutorials/how-to-install-and-use-the-digitalocean-agent-for-monitoring). |
| robertdebock.digitalocean-agent | Debian, Ubuntu | Package attempts to start service which is not possible in Docker. |

## Ansible version
The goal is to let all roles work on these Ansible version:
```
  - ansible_version=">=2.3,<2.4"
  - ansible_version=">=2.4,<2.5"
  - ansible_version=">=2.5,<2.6"
```

### Exceptions in Ansible version
This table lists the exceptions in Ansible version and the reason why.

| Ansible role | Excepted Ansible version | Resoning |
|---|---|---|
| robertdebock.httpd | 2.3 | Uses `*_certificate` modules only supported in Ansible 2.4 and up. |
| robertdebock.phpmyadmin | 2.3 | Depends on [httpd](https://galaxy.ansible.com/robertdebock/httpd/). |
| robertdebock.zabbix | 2.3 | Depends on [httpd](https://galaxy.ansible.com/robertdebock/httpd/). |

See errors? Please help and [make a merge request on git](https://github.com/robertdebock/robertdebock.github.io/).
