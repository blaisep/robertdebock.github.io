## Ansible roles
These [Ansible](https://www.ansible.com/) roles are [simple](style.html) and work well together on many distributions and many Ansible version.

## Integration tests

A weekly test to verify if roles work well together.

[![Build Status](https://travis-ci.org/robertdebock/ansible-integration.svg?branch=master)](https://travis-ci.org/robertdebock/ansible-integration) [ARA report](https://robertdebock.nl/ansible-integration/).

## Unit tests

A monthly test to see of the role still works on the current distributions.

1. [![Build Status](https://api.travis-ci.org/robertdebock/ansible-role-at.svg?branch=master)](https://travis-ci.org/robertdebock/ansible-role-at) [![Version](https://img.shields.io/github/release/robertdebock/ansible-role-at.svg)](https://github.com/robertdebock/ansible-role-at/releases) [at](https://galaxy.ansible.com/robertdebock/at/) - [source](https://github.com/robertdebock/ansible-role-at).
2. [![Build Status](https://api.travis-ci.org/robertdebock/ansible-role-ara.svg?branch=master)](https://travis-ci.org/robertdebock/ansible-role-ara) [ara](https://galaxy.ansible.com/robertdebock/ara/) - [source](https://github.com/robertdebock/ansible-role-ara).
3. [![Build Status](https://api.travis-ci.org/robertdebock/ansible-role-awx.svg?branch=master)](https://travis-ci.org/robertdebock/ansible-role-awx) [awx](https://galaxy.ansible.com/robertdebock/awx/) - [source](https://github.com/robertdebock/ansible-role-awx).
4. [![Build Status](https://api.travis-ci.org/robertdebock/ansible-role-bootstrap.svg?branch=master)](https://travis-ci.org/robertdebock/ansible-role-bootstrap) [bootstrap](https://galaxy.ansible.com/robertdebock/bootstrap/) - [source](https://github.com/robertdebock/ansible-role-bootstrap).
5. [![Build Status](https://api.travis-ci.org/robertdebock/ansible-role-buildtools.svg?branch=master)](https://travis-ci.org/robertdebock/ansible-role-buildtools) [buildtools](https://galaxy.ansible.com/robertdebock/buildtools/) - [source](https://github.com/robertdebock/ansible-role-buildtools).
6. [![Build Status](https://api.travis-ci.org/robertdebock/ansible-role-cargo.svg?branch=master)](https://travis-ci.org/robertdebock/ansible-role-cargo) [cargo](https://galaxy.ansible.com/robertdebock/cargo/) - [source](https://github.com/robertdebock/ansible-role-cargo).
7. [![Build Status](https://api.travis-ci.org/robertdebock/ansible-role-cntlm.svg?branch=master)](https://travis-ci.org/robertdebock/ansible-role-cntlm) [cntlm](https://galaxy.ansible.com/robertdebock/cntlm/) - [source](https://github.com/robertdebock/ansible-role-cntlm).
8. [![Build Status](https://api.travis-ci.org/robertdebock/ansible-role-clamav.svg?branch=master)](https://travis-ci.org/robertdebock/ansible-role-clamav) [clamav](https://galaxy.ansible.com/robertdebock/clamav/) - [source](https://github.com/robertdebock/ansible-role-clamav).
9. [![Build Status](https://api.travis-ci.org/robertdebock/ansible-role-dhcpd.svg?branch=master)](https://travis-ci.org/robertdebock/ansible-role-dhcpd) [dhcpd](https://galaxy.ansible.com/robertdebock/dhcpd/) - [source](https://github.com/robertdebock/ansible-role-dhcpd).
10. [![Build Status](https://api.travis-ci.org/robertdebock/ansible-role-digitalocean-agent.svg?branch=master)](https://travis-ci.org/robertdebock/ansible-role-digitalocean-agent) [digitalocean-agent](https://galaxy.ansible.com/robertdebock/digitalocean-agent/) - [source](https://github.com/robertdebock/ansible-role-digitalocean-agent).
11. [![Build Status](https://api.travis-ci.org/robertdebock/ansible-role-dns.svg?branch=master)](https://travis-ci.org/robertdebock/ansible-role-dns) [dns](https://galaxy.ansible.com/robertdebock/dns/) - [source](https://github.com/robertdebock/ansible-role-dns).
12. [![Build Status](https://api.travis-ci.org/robertdebock/ansible-role-docker.svg?branch=master)](https://travis-ci.org/robertdebock/ansible-role-docker) [docker](https://galaxy.ansible.com/robertdebock/docker/) - [source](https://github.com/robertdebock/ansible-role-docker).
13. [![Build Status](https://api.travis-ci.org/robertdebock/ansible-role-dovecot.svg?branch=master)](https://travis-ci.org/robertdebock/ansible-role-dovecot) [dovecot](https://galaxy.ansible.com/robertdebock/dovecot/) - [source](https://github.com/robertdebock/ansible-role-dovecot).
14. [![Build Status](https://api.travis-ci.org/robertdebock/ansible-role-epel.svg?branch=master)](https://travis-ci.org/robertdebock/ansible-role-epel) [epel](https://galaxy.ansible.com/robertdebock/epel/) - [source](https://github.com/robertdebock/ansible-role-epel).
15. [![Build Status](https://api.travis-ci.org/robertdebock/ansible-role-gotop.svg?branch=master)](https://travis-ci.org/robertdebock/ansible-role-gotop) [gotop](https://galaxy.ansible.com/robertdebock/gotop/) - [source](https://github.com/robertdebock/ansible-role-gotop).
16. [![Build Status](https://api.travis-ci.org/robertdebock/ansible-role-fail2ban.svg?branch=master)](https://travis-ci.org/robertdebock/ansible-role-fail2ban) [fail2ban](https://galaxy.ansible.com/robertdebock/fail2ban/) - [source](https://github.com/robertdebock/ansible-role-fail2ban).
17. [![Build Status](https://api.travis-ci.org/robertdebock/ansible-role-haproxy.svg?branch=master)](https://travis-ci.org/robertdebock/ansible-role-haproxy) [haproxy](https://galaxy.ansible.com/robertdebock/haproxy/) - [source](https://github.com/robertdebock/ansible-role-haproxy).
18. [![Build Status](https://api.travis-ci.org/robertdebock/ansible-role-haveged.svg?branch=master)](https://travis-ci.org/robertdebock/ansible-role-haveged) [haveged](https://galaxy.ansible.com/robertdebock/haveged/) - [source](https://github.com/robertdebock/ansible-role-haveged).
19. [![Build Status](https://api.travis-ci.org/robertdebock/ansible-role-httpd.svg?branch=master)](https://travis-ci.org/robertdebock/ansible-role-httpd) [httpd](https://galaxy.ansible.com/robertdebock/httpd/) - [source](https://github.com/robertdebock/ansible-role-httpd).
20. [![Build Status](https://api.travis-ci.org/robertdebock/ansible-role-iptables.svg?branch=master)](https://travis-ci.org/robertdebock/ansible-role-iptables) [iptables](https://galaxy.ansible.com/robertdebock/iptables/) - [source](https://github.com/robertdebock/ansible-role-iptables).
21. [![Build Status](https://api.travis-ci.org/robertdebock/ansible-role-java.svg?branch=master)](https://travis-ci.org/robertdebock/ansible-role-java) [java](https://galaxy.ansible.com/robertdebock/java/) - [source](https://github.com/robertdebock/ansible-role-java).
22. [![Build Status](https://api.travis-ci.org/robertdebock/ansible-role-mitogen.svg?branch=master)](https://travis-ci.org/robertdebock/ansible-role-mitogen) [mitogen](https://galaxy.ansible.com/robertdebock/mitogen/) - [source](https://github.com/robertdebock/ansible-role-mitogen).
23. [![Build Status](https://api.travis-ci.org/robertdebock/ansible-role-mssql.svg?branch=master)](https://travis-ci.org/robertdebock/ansible-role-mssql) [mssql](https://galaxy.ansible.com/robertdebock/mssql/) - [source](https://github.com/robertdebock/ansible-role-mssql).
24. [![Build Status](https://api.travis-ci.org/robertdebock/ansible-role-mysql.svg?branch=master)](https://travis-ci.org/robertdebock/ansible-role-mysql) [mysql](https://galaxy.ansible.com/robertdebock/mysql/) - [source](https://github.com/robertdebock/ansible-role-mysql).
25. [![Build Status](https://api.travis-ci.org/robertdebock/ansible-role-natrouter.svg?branch=master)](https://travis-ci.org/robertdebock/ansible-role-natrouter) [natrouter](https://galaxy.ansible.com/robertdebock/natrouter/) - [source](https://github.com/robertdebock/ansible-role-natrouter).
26. [![Build Status](https://api.travis-ci.org/robertdebock/ansible-role-nginx.svg?branch=master)](https://travis-ci.org/robertdebock/ansible-role-nginx) [nginx](https://galaxy.ansible.com/robertdebock/nginx/) - [source](https://github.com/robertdebock/ansible-role-nginx).
27. [![Build Status](https://api.travis-ci.org/robertdebock/ansible-role-npm.svg?branch=master)](https://travis-ci.org/robertdebock/ansible-role-npm) [npm](https://galaxy.ansible.com/robertdebock/npm/) - [source](https://github.com/robertdebock/ansible-role-npm).
28. [![Build Status](https://api.travis-ci.org/robertdebock/ansible-role-ntp.svg?branch=master)](https://travis-ci.org/robertdebock/ansible-role-ntp) [ntp](https://galaxy.ansible.com/robertdebock/ntp/) - [source](https://github.com/robertdebock/ansible-role-ntp).
29. [![Build Status](https://api.travis-ci.org/robertdebock/ansible-role-owncloud.svg?branch=master)](https://travis-ci.org/robertdebock/ansible-role-owncloud) [owncloud](https://galaxy.ansible.com/robertdebock/owncloud/) - [source](https://github.com/robertdebock/ansible-role-owncloud).
30. [![Build Status](https://api.travis-ci.org/robertdebock/ansible-role-packer.svg?branch=master)](https://travis-ci.org/robertdebock/ansible-role-packer) [packer](https://galaxy.ansible.com/robertdebock/packer/) - [source](https://github.com/robertdebock/ansible-role-packer).
31. [![Build Status](https://api.travis-ci.org/robertdebock/ansible-role-phpmyadmin.svg?branch=master)](https://travis-ci.org/robertdebock/ansible-role-phpmyadmin) [phpmyadmin](https://galaxy.ansible.com/robertdebock/phpmyadmin/) - [source](https://github.com/robertdebock/ansible-role-phpmyadmin).
32. [![Build Status](https://api.travis-ci.org/robertdebock/ansible-role-php.svg?branch=master)](https://travis-ci.org/robertdebock/ansible-role-php) [php](https://galaxy.ansible.com/robertdebock/php/) - [source](https://github.com/robertdebock/ansible-role-php).
33. [![Build Status](https://api.travis-ci.org/robertdebock/ansible-role-postfix.svg?branch=master)](https://travis-ci.org/robertdebock/ansible-role-postfix) [postfix](https://galaxy.ansible.com/robertdebock/postfix/) - [source](https://github.com/robertdebock/ansible-role-postfix).
34. [![Build Status](https://api.travis-ci.org/robertdebock/ansible-role-python-pip.svg?branch=master)](https://travis-ci.org/robertdebock/ansible-role-python-pip) [python_pip](https://galaxy.ansible.com/robertdebock/python_pip/) - [source](https://github.com/robertdebock/ansible-role-python-pip).
35. [![Build Status](https://api.travis-ci.org/robertdebock/ansible-role-release.svg?branch=master)](https://travis-ci.org/robertdebock/ansible-role-release) [release](https://galaxy.ansible.com/robertdebock/release/) - [source](https://github.com/robertdebock/ansible-role-release).
36. [![Build Status](https://api.travis-ci.org/robertdebock/ansible-role-revealmd.svg?branch=master)](https://travis-ci.org/robertdebock/ansible-role-revealmd) [revealmd](https://galaxy.ansible.com/robertdebock/revealmd/) - [source](https://github.com/robertdebock/ansible-role-revealmd).
37. [![Build Status](https://api.travis-ci.org/robertdebock/ansible-role-roundcubemail.svg?branch=master)](https://travis-ci.org/robertdebock/ansible-role-roundcubemail) [roundcubemail](https://galaxy.ansible.com/robertdebock/roundcubemail/) - [source](https://github.com/robertdebock/ansible-role-roundcubemail).
38. [![Build Status](https://api.travis-ci.org/robertdebock/ansible-role-rsyslog.svg?branch=master)](https://travis-ci.org/robertdebock/ansible-role-rsyslog) [rsyslog](https://galaxy.ansible.com/robertdebock/rsyslog/) - [source](https://github.com/robertdebock/ansible-role-rsyslog).
39. [![Build Status](https://api.travis-ci.org/robertdebock/ansible-role-ruby.svg?branch=master)](https://travis-ci.org/robertdebock/ansible-role-ruby) [ruby](https://galaxy.ansible.com/robertdebock/ruby/) - [source](https://github.com/robertdebock/ansible-role-ruby).
40. [![Build Status](https://api.travis-ci.org/robertdebock/ansible-role-rundeck.svg?branch=master)](https://travis-ci.org/robertdebock/ansible-role-rundeck) [rundeck](https://galaxy.ansible.com/robertdebock/rundeck/) - [source](https://github.com/robertdebock/ansible-role-rundeck).
41. [![Build Status](https://api.travis-ci.org/robertdebock/ansible-role-scl.svg?branch=master)](https://travis-ci.org/robertdebock/ansible-role-scl) [scl](https://galaxy.ansible.com/robertdebock/scl/) - [source](https://github.com/robertdebock/ansible-role-scl).
42. [![Build Status](https://api.travis-ci.org/robertdebock/ansible-role-spamassassin.svg?branch=master)](https://travis-ci.org/robertdebock/ansible-role-spamassassin) [spamassassin](https://galaxy.ansible.com/robertdebock/spamassassin/) - [source](https://github.com/robertdebock/ansible-role-spamassassin).
43. [![Build Status](https://api.travis-ci.org/robertdebock/ansible-role-sudo-pair.svg?branch=master)](https://travis-ci.org/robertdebock/ansible-role-sudo-pair) [sudo-pair](https://galaxy.ansible.com/robertdebock/sudo-pair/) - [source](https://github.com/robertdebock/ansible-role-sudo-pair).
44. [![Build Status](https://api.travis-ci.org/robertdebock/ansible-role-terraform.svg?branch=master)](https://travis-ci.org/robertdebock/ansible-role-terraform) [terraform](https://galaxy.ansible.com/robertdebock/terraform/) - [source](https://github.com/robertdebock/ansible-role-terraform).
45. [![Build Status](https://api.travis-ci.org/robertdebock/ansible-role-tftpd.svg?branch=master)](https://travis-ci.org/robertdebock/ansible-role-tftpd) [tftpd](https://galaxy.ansible.com/robertdebock/tftpd/) - [source](https://github.com/robertdebock/ansible-role-tftpd).
46. [![Build Status](https://api.travis-ci.org/robertdebock/ansible-role-tomcat.svg?branch=master)](https://travis-ci.org/robertdebock/ansible-role-tomcat) [tomcat](https://galaxy.ansible.com/robertdebock/tomcat/) - [source](https://github.com/robertdebock/ansible-role-tomcat).
47. [![Build Status](https://api.travis-ci.org/robertdebock/ansible-role-update.svg?branch=master)](https://travis-ci.org/robertdebock/ansible-role-update) [update](https://galaxy.ansible.com/robertdebock/update/) - [source](https://github.com/robertdebock/ansible-role-update).
48. [![Build Status](https://api.travis-ci.org/robertdebock/ansible-role-xinetd.svg?branch=master)](https://travis-ci.org/robertdebock/ansible-role-xinetd) [xinetd](https://galaxy.ansible.com/robertdebock/xinetd/) - [source](https://github.com/robertdebock/ansible-role-xinetd).
49. [![Build Status](https://api.travis-ci.org/robertdebock/ansible-role-zabbix.svg?branch=master)](https://travis-ci.org/robertdebock/ansible-role-zabbix) [zabbix](https://galaxy.ansible.com/robertdebock/zabbix/) - [source](https://github.com/robertdebock/ansible-role-zabbix).

## Dependencies
Here is an overview of the dependencies between the roles. These dependecies are "soft", "loose" or "implicit", meaning you *may* depend on the roles as described here, but are not required to.
Each role has a description of the intended use in the `README.md`, and a list of the required packages in `requirements.yml`.
The dependencies are soft for these reasons:
- Better reusability.
- Easier to fork.
- Let implementor assume a start-state of a machine.

[![Overview of dependencies](https://raw.githubusercontent.com/robertdebock/drawings/artifacts/dependencies.png "Dependency overview")](https://raw.githubusercontent.com/robertdebock/drawings/artifacts/dependencies.png)

Because these dependecies are loose, you have to include them in your playbook yourself:

```yaml
- name: make the best machine ever
  hosts: all
  become: yes

  roles:
    - role: robertdebock.bootstrap
    - role: robertdebock.java
    - role: robertdebock.tomcat
```

Some roles do have a "hard requirement" on another role, mainy for a shared handler.

| Role          | Depends on |
|---------------|------------|
| [tftpd](https://galaxy.ansible.com/robertdebock/tftpd/) | [xinetd](https://galaxy.ansible.com/robertdebock/xinetd/) |
| [php](https://galaxy.ansible.com/robertdebock/php/) | [httpd](https://galaxy.ansible.com/robertdebock/httpd/) |
| [phpmyadmin](https://galaxy.ansible.com/robertdebock/phpmyadmin/) | [httpd](https://galaxy.ansible.com/robertdebock/httpd/) |
| [roundcubemail](https://galaxy.ansible.com/robertdebock/roundcubemail/) | [httpd](https://galaxy.ansible.com/robertdebock/httpd/) |
| [spamassassin](https://galaxy.ansible.com/robertdebock/spamassassin/) | [rsyslog](https://galaxy.ansible.com/robertdebock/rsyslog/) |
| [zabbix](https://galaxy.ansible.com/robertdebock/zabbix/) | [httpd](https://galaxy.ansible.com/robertdebock/httpd/) |

## Tests
Unit tests and integration tests are use to verify the quality of the roles, read [more about testing](testing.html)

## Distributions
The goal is to let all Ansible roles work on as many distributions as possible, but this is sometimes not possible. For each distribution, the current and previous release is tested. A role may work on diferent distributions, like Red Hat Enterprise Linux (RHEL), but it's not tested against it. By default these Linux distributions are included in the tests:

| Distribution | Version(s)                  |
|--------------|-----------------------------|
| Archlinux    | latest                      |
| Alpine       | latest & edge               |
| CentOS       | 6 & latest                  |
| Debian       | stable, latest & unstable*  |
| Fedora       | latest & rawhide*           |
| OpenSUSE     | leap & tumbleweed           | 
| Ubuntu       | 17 (artful), latest, devel* |

* = These are experimental, builds are done for informative purposes and may fail.

### Exceptions in distributions
Some Ansible roles do not work on all distributions. This table lists why.

| Ansible role | Excepted Linux distribution(s) | Reasoning |
|--------------|--------------------------------|-----------|
| [ara](https://galaxy.ansible.com/robertdebock/ara) | CentOS 6 | Depends on Ansible role [python_pip](https://galaxy.ansible.com/robertdebock/python_pip/). |
| [cargo](https://galaxy.ansible.com/robertdebock/cargo) | CentOS 6 | Rust is too old. |
| [clamav](https://galaxy.ansible.com/robertdebock/clamav)* | ArchLinux | Directory structure is different. |
| [digitalocean-agent](https://galaxy.ansible.com/robertdebock/dititalocean_agent)* | Alpine, ArchLinux, OpenSUSE  | Not supported by [DigitalOcean](https://www.digitalocean.com/community/tutorials/how-to-install-and-use-the-digitalocean-agent-for-monitoring). |
| [digitalocean-agent](https://galaxy.ansible.com/robertdebock/dititalocean_agent)* | Debian, Ubuntu | Package attempts to start service which is not possible in Docker. |
| [httpd](https://galaxy.ansible.com/robertdebock/httpd) | CentOS 6 | `the SNI (Subject Name Indication) extension to TLS is not available on this platform`. | 
| [mssql](https://galaxy.ansible.com/robertdebock/mssql) | ArchLinux, Alpine, Debian & Fedora | [Not supported](https://docs.microsoft.com/en-us/sql/linux/sql-server-linux-setup?view=sql-server-linux-2017) by Microsoft. |
| [npm](https://galaxy.ansible.com/robertdebock/npm) | OpenSUSE Tumbleweed | "No JSON object could be decoded". |
| [owncloud](https://galaxy.ansible.com/robertdebock/owncloud) | CentOS 6 | `python setup.py egg_info\" failed with error code 1 in /tmp/pip-build-Dy5JDw/SQLAlchemy`. |
| [php](https://galaxy.ansible.com/robertdebock/php) | CentOS 6 | Depends on Ansible role [httpd](https://galaxy.ansible.com/robertdebock/httpd/). |
| [phpmyadmin](https://galaxy.ansible.com/robertdebock/phpmyadmin) | CentOS 6 | Depends on Ansible role [httpd](https://galaxy.ansible.com/robertdebock/httpd/). |
| [phpmyadmin](https://galaxy.ansible.com/robertdebock/phpmyadmin) | Alpine | There is no MySQL, only mariadb. |
| [revealmd](https://galaxy.ansible.com/robertdebock/revealmd) | CentOS 6, Fedora Rawhide, OpenSUSE Tumbleweed | dont know |
| [revealmd](https://galaxy.ansible.com/robertdebock/revealmd) | Debian | Depends on Ansible role [npm](https://galaxy.ansible.com/robertdebock/npm/). |
| [roundcubemail](https://galaxy.ansible.com/robertdebock/roundcubemail) | CentOS 6 | dont know. |
| [rsyslog](https://galaxy.ansible.com/robertdebock/rsyslog) | ArchLinux | Package is only available in AUR. |
| [spamassassin](https://galaxy.ansible.com/robertdebock/spamassassin) | Archlinux | Depends on Ansible role [rsyslog](https://galaxy.ansible.com/robertdebock/rsyslog/). |
| [sudo_pair](https://galaxy.ansible.com/robertdebock/sudo_pair) | Alpine & CentOS 6 | dont know |
| [tftpd](https://galaxy.ansible.com/robertdebock/tftpd) | Alpine | Depends on Ansible role [xinetd](https://galaxy.ansible.com/robertdebock/xinetd/). |
| [tftpd](https://galaxy.ansible.com/robertdebock/tftpd) | Archlinux | The package `tftpd` is not available. |
| [xinetd](https://galaxy.ansible.com/robertdebock/xinetd) | Alpine | The package `xinetd` is not available. |
| [zabbix](https://galaxy.ansible.com/robertdebock/zabbix) | ArchLinux, Alpine, Debian, Fedora & OpenSUSE | Zabbix has [limited OS support](https://www.zabbix.com/documentation/3.4/manual/installation/requirements). |

## Ansible version
The goal is to let all roles work on these Ansible version:
```
  - ansible_version=">=2.4,<2.5"
  - ansible_version=">=2.5,<2.6"
  - ansible_version=">=2.6,<2.7"
```

See errors? Please help and [make a merge request on git](https://github.com/robertdebock/robertdebock.github.io/).
